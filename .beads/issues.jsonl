{"id":"remarkable-sync-00a","title":"Structured logging infrastructure","description":"Set up internal/logger for structured logging throughout the application:\n- Use logrus or zap for structured logging\n- Support multiple log levels: debug, info, warn, error\n- JSON format option for machine parsing\n- File output option for daemon mode\n- Context-aware logging with fields (document_id, operation, duration)\n- Configurable via config package\n\nAll components will use this for consistent logging.","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-29T16:48:54.776665-06:00","created_by":"cody.lee","updated_at":"2025-12-30T10:00:32.170434-06:00","closed_at":"2025-12-30T10:00:32.170434-06:00","close_reason":"Closed","dependencies":[{"issue_id":"remarkable-sync-00a","depends_on_id":"remarkable-sync-69u","type":"blocks","created_at":"2025-12-29T16:56:56.914219-06:00","created_by":"daemon"}]}
{"id":"remarkable-sync-0l6","title":"Fix golangci-lint configuration and resolve all linting errors","description":"## Problem\n\nThe golangci-lint CI step is currently failing. Need to:\n1. Fix the golangci-lint configuration (missing version field for v2.x)\n2. Run linter locally and fix all reported issues\n\n## Current Status\n\n- CI workflow: Uses `golangci/golangci-lint-action@v6` with version: latest\n- Local version: golangci-lint 2.7.2\n- Config file: `.golangci.yml` missing required `version` field\n- Error: \"unsupported version of the configuration\"\n\n## Tasks\n\n- [ ] Add `version: 2` to .golangci.yml header\n- [ ] Run `golangci-lint run` locally to see all issues\n- [ ] Fix errcheck issues (unchecked errors)\n- [ ] Fix gosimple issues (simplification suggestions)\n- [ ] Fix govet issues (suspicious constructs)\n- [ ] Fix ineffassign issues (ineffectual assignments)\n- [ ] Fix staticcheck issues (static analysis)\n- [ ] Fix unused issues (unused code)\n- [ ] Fix gofmt issues (formatting)\n- [ ] Fix goimports issues (import organization)\n- [ ] Fix misspell issues (spelling errors)\n- [ ] Fix revive issues (style issues)\n- [ ] Fix unconvert issues (unnecessary conversions)\n- [ ] Fix unparam issues (unused parameters)\n- [ ] Fix goconst issues (repeated strings)\n- [ ] Fix gocyclo issues (cyclomatic complexity)\n- [ ] Fix gosec issues (security issues)\n- [ ] Verify CI passes after fixes\n\n## Files to Check\n\nBased on recent changes, likely issues in:\n- `internal/rmclient/client.go`\n- `internal/rmclient/client_test.go`\n- `internal/converter/converter.go`\n- `internal/rmrender/parser.go`\n- `cmd/remarkable-sync/`\n\n## Reference\n\n- CI workflow: `.github/workflows/ci.yml` line 62-66\n- Linter config: `.golangci.yml`\n- Migration guide: https://golangci-lint.run/docs/product/migration-guide","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-30T15:05:04.064029-06:00","created_by":"cody.lee","updated_at":"2025-12-30T15:05:04.064029-06:00"}
{"id":"remarkable-sync-5y9","title":"Main entry point and wiring","description":"Create main.go entry point to initialize and run the application:\n- Initialize configuration (config package)\n- Set up logging (logger package)\n- Wire up dependency injection (manual or using wire/fx if needed)\n- Invoke Cobra root command\n- Handle top-level error conditions (config errors, missing dependencies)\n- Signal handling for graceful shutdown\n- Exit with appropriate exit codes\n\nFinal piece that assembles all components into executable binary.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-29T16:49:10.787677-06:00","created_by":"cody.lee","updated_at":"2025-12-30T12:57:52.706073-06:00","closed_at":"2025-12-30T12:57:52.706073-06:00","close_reason":"Closed","dependencies":[{"issue_id":"remarkable-sync-5y9","depends_on_id":"remarkable-sync-ea7","type":"blocks","created_at":"2025-12-29T16:57:06.489919-06:00","created_by":"daemon"}]}
{"id":"remarkable-sync-65d","title":"OCR processing with Tesseract integration","description":"Implement internal/ocr package for extracting text from PDF pages:\n- Use github.com/otiai10/gosseract as Tesseract wrapper\n- Process: render PDF pages to images → run Tesseract with HOCR output → parse HOCR XML\n- Extract text with positional information (bounding boxes)\n- OCR result types: PageOCR with text and WordBoundingBox array\n- Coordinate transformation from image space to PDF coordinate system\n- Support configurable languages (default: eng, configurable via config)\n- Handle OCR failures gracefully (log and continue)\n\nEnables searchable text layer in PDFs.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-29T16:49:03.069661-06:00","created_by":"cody.lee","updated_at":"2025-12-30T12:21:32.90217-06:00","closed_at":"2025-12-30T12:21:32.90217-06:00","close_reason":"Closed","dependencies":[{"issue_id":"remarkable-sync-65d","depends_on_id":"remarkable-sync-akz","type":"blocks","created_at":"2025-12-29T16:56:57.463559-06:00","created_by":"daemon"},{"issue_id":"remarkable-sync-65d","depends_on_id":"remarkable-sync-00a","type":"blocks","created_at":"2025-12-29T16:56:57.488078-06:00","created_by":"daemon"}]}
{"id":"remarkable-sync-69u","title":"Project scaffolding and build infrastructure","description":"Set up project infrastructure:\n- Create Makefile for build automation (build, test, lint, install targets)\n- Update go.mod with key dependencies: cobra, viper, rmapi, gosseract, pdfcpu\n- Create directory structure: cmd/, internal/{config,logger,rmclient,state,sync,converter,ocr,pdfenhancer,daemon}/\n- Set up GitHub Actions CI/CD: test on push, lint with golangci-lint, multi-platform builds\n- Add .gitignore for Go projects\n\nThis is the foundation that all other work depends on.","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-29T16:48:54.317001-06:00","created_by":"cody.lee","updated_at":"2025-12-30T09:45:46.545683-06:00","closed_at":"2025-12-30T09:45:46.545683-06:00","close_reason":"Closed"}
{"id":"remarkable-sync-6gn","title":"PDF conversion from .rmdoc files","description":"Implement internal/converter to convert .rmdoc files to PDF:\n- .rmdoc format: ZIP archive with page data (.rm files), metadata (JSON), optional original PDF\n- Conversion strategies:\n  1. Use rmapi built-in PDF export (if available)\n  2. Reference rm2pdf library (github.com/rorycl/rm2pdf)\n  3. Manual: render pages from .rm files to images → combine into PDF\n- Handle metadata extraction (title, author, date)\n- Output: standard PDF at {output_dir}/{folder}/{name}.pdf\n- Preserve folder structure from reMarkable\n\nConverts reMarkable documents to standard PDF format for OCR processing.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-29T16:49:03.521329-06:00","created_by":"cody.lee","updated_at":"2025-12-30T12:02:17.176538-06:00","closed_at":"2025-12-30T12:02:17.176538-06:00","close_reason":"Closed","dependencies":[{"issue_id":"remarkable-sync-6gn","depends_on_id":"remarkable-sync-ph3","type":"blocks","created_at":"2025-12-29T16:56:57.730397-06:00","created_by":"daemon"},{"issue_id":"remarkable-sync-6gn","depends_on_id":"remarkable-sync-00a","type":"blocks","created_at":"2025-12-29T16:56:57.754105-06:00","created_by":"daemon"}]}
{"id":"remarkable-sync-7ce","title":"User documentation and examples","description":"Create comprehensive user documentation:\n- README updates: project overview, features, use cases\n- Installation instructions: go install, pre-built binaries, Homebrew (if available)\n- Prerequisites: Go version, Tesseract installation, reMarkable account\n- Configuration guide: config file format, environment variables, CLI flags\n- Usage examples: auth, one-time sync, daemon mode, label filtering\n- Troubleshooting: common errors, debugging tips, FAQ\n- Architecture diagram (optional): component overview\n- Contributing guidelines (optional)\n\nMakes tool accessible and usable by end users.","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-29T16:49:16.93221-06:00","created_by":"cody.lee","updated_at":"2025-12-30T13:46:48.464209-06:00","closed_at":"2025-12-30T13:46:48.464209-06:00","close_reason":"Closed","dependencies":[{"issue_id":"remarkable-sync-7ce","depends_on_id":"remarkable-sync-ui9","type":"blocks","created_at":"2025-12-29T16:57:07.460935-06:00","created_by":"daemon"}]}
{"id":"remarkable-sync-8fy","title":"Configuration management with Viper","description":"Implement internal/config package for centralized configuration management:\n- Use Viper to support multiple config sources (CLI flags \u003e env vars \u003e config file \u003e defaults)\n- Config struct with all settings: OutputDir, Labels, OCREnabled, OCRLanguages, SyncInterval, StateFile, TesseractPath, LogLevel\n- Config file support (~/.remarkable-sync.yaml)\n- Environment variables (REMARKABLE_SYNC_*)\n- Validation logic for required settings and path existence\n- Default values for optional settings\n\nRequired by all components that need configuration.","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-29T16:48:54.551421-06:00","created_by":"cody.lee","updated_at":"2025-12-30T09:49:58.932029-06:00","closed_at":"2025-12-30T09:49:58.932029-06:00","close_reason":"Closed","dependencies":[{"issue_id":"remarkable-sync-8fy","depends_on_id":"remarkable-sync-69u","type":"blocks","created_at":"2025-12-29T16:56:56.889732-06:00","created_by":"daemon"}]}
{"id":"remarkable-sync-8m2","title":"Daemon mode with periodic sync","description":"Implement internal/daemon for long-running periodic sync:\n- Ticker-based scheduling with configurable interval (default: 5 minutes, configurable via config)\n- Graceful shutdown: handle SIGTERM/SIGINT for clean termination\n- Signal handling to allow mid-sync completion before shutdown\n- Error recovery: continue running even if individual sync attempts fail\n- Logging for daemon lifecycle events (started, sync triggered, shutting down)\n- Optional: health check HTTP endpoint for monitoring\n- Optional: PID file management for process control\n\nEnables hands-free continuous sync without manual intervention.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-29T16:49:10.31986-06:00","created_by":"cody.lee","updated_at":"2025-12-30T12:36:44.192125-06:00","closed_at":"2025-12-30T12:36:44.192125-06:00","close_reason":"Closed","dependencies":[{"issue_id":"remarkable-sync-8m2","depends_on_id":"remarkable-sync-8nh","type":"blocks","created_at":"2025-12-29T16:57:06.173693-06:00","created_by":"daemon"}]}
{"id":"remarkable-sync-8nh","title":"Sync orchestrator workflow coordination","description":"Implement internal/sync package to orchestrate the complete sync workflow:\n- Main workflow: list docs from API → filter by labels → load state → identify new/changed → download → convert → OCR → enhance → update state\n- Error handling: continue on individual document failures, collect errors, report at end\n- Progress tracking and reporting (console output showing current document X/Y)\n- Partial state updates (don't lose progress on failures)\n- Dependencies: rmclient (API), state (tracking), converter (PDF), ocr (text extraction), pdfenhancer (text layer)\n- Configurable via config package (output dir, labels, OCR enable/disable)\n\nCore orchestration component that ties all pieces together into cohesive sync workflow.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-29T16:49:10.093194-06:00","created_by":"cody.lee","updated_at":"2025-12-30T12:32:40.215523-06:00","closed_at":"2025-12-30T12:32:40.215523-06:00","close_reason":"Closed","dependencies":[{"issue_id":"remarkable-sync-8nh","depends_on_id":"remarkable-sync-bgg","type":"blocks","created_at":"2025-12-29T16:56:58.06526-06:00","created_by":"daemon"},{"issue_id":"remarkable-sync-8nh","depends_on_id":"remarkable-sync-c87","type":"blocks","created_at":"2025-12-29T16:56:58.088202-06:00","created_by":"daemon"},{"issue_id":"remarkable-sync-8nh","depends_on_id":"remarkable-sync-6gn","type":"blocks","created_at":"2025-12-29T16:56:58.11241-06:00","created_by":"daemon"},{"issue_id":"remarkable-sync-8nh","depends_on_id":"remarkable-sync-65d","type":"blocks","created_at":"2025-12-29T16:56:58.135924-06:00","created_by":"daemon"},{"issue_id":"remarkable-sync-8nh","depends_on_id":"remarkable-sync-gcm","type":"blocks","created_at":"2025-12-29T16:56:58.159838-06:00","created_by":"daemon"}]}
{"id":"remarkable-sync-9qb","title":"Integrate rmapi library for reMarkable cloud API","description":"The internal/rmclient package currently has stub implementations that return 'not yet implemented' errors. Need to integrate the actual rmapi library to provide real reMarkable cloud API functionality.\n\n## Current State\n\ninternal/rmclient/client.go has placeholder implementations for:\n- ListDocuments() - Returns 'not yet implemented' error\n- GetDocumentMetadata() - Returns 'not yet implemented' error\n- DownloadDocument() - Returns 'not yet implemented' error\n\n## Required Changes\n\n1. **Add rmapi dependency**\n   - Add github.com/juruen/rmapi to go.mod\n   - Or use alternative: github.com/ddvk/rmapi\n\n2. **Implement ListDocuments**\n   - Call rmapi to list documents from cloud\n   - Filter by labels if specified\n   - Convert rmapi types to internal Document types\n   - Handle pagination if needed\n\n3. **Implement GetDocumentMetadata**\n   - Fetch document metadata from rmapi\n   - Convert to internal Metadata type\n\n4. **Implement DownloadDocument**\n   - Download .rmdoc file via rmapi\n   - Save to specified output path\n   - Handle authentication and retries\n\n5. **Update authentication flow**\n   - Use rmapi's authentication mechanism\n   - Store token in expected format\n\n6. **Add error handling**\n   - Network errors\n   - Authentication failures\n   - Rate limiting\n   - Document not found\n\n7. **Update tests**\n   - Mock rmapi calls\n   - Test error scenarios\n   - Integration tests with real API (optional)\n\n## Dependencies\n\n- rmapi library (github.com/juruen/rmapi or github.com/ddvk/rmapi)\n- Review rmapi documentation\n- Test with real reMarkable account\n\n## Testing Strategy\n\n- Unit tests with mocked rmapi calls\n- Integration tests with test account (optional)\n- Error handling scenarios\n- Authentication flow testing","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T13:48:12.916419-06:00","created_by":"cody.lee","updated_at":"2025-12-30T13:58:37.780687-06:00","closed_at":"2025-12-30T13:58:37.780687-06:00","close_reason":"Closed"}
{"id":"remarkable-sync-9yw","title":"Add Homebrew tap release to GoReleaser","description":"Enable automatic Homebrew tap updates when releases are published.\n\n**Goal:**\nConfigure GoReleaser to automatically update the Homebrew tap at platinummonkey/homebrew-tap when a new release is created.\n\n**Implementation:**\n- Uncomment and configure the brews section in .goreleaser.yaml\n- Set repository to platinummonkey/homebrew-tap\n- Configure formula with proper dependencies (tesseract as optional)\n- Add installation instructions\n- Update RELEASE.md with Homebrew tap setup\n- Add HOMEBREW_TAP_GITHUB_TOKEN secret documentation\n\n**Testing:**\n- Verify formula configuration\n- Document token setup process\n- Test formula syntax (optional if repo exists)\n\nThis allows users to install via: brew install platinummonkey/tap/remarkable-sync","status":"closed","priority":3,"issue_type":"feature","created_at":"2025-12-30T14:12:16.523293-06:00","created_by":"cody.lee","updated_at":"2025-12-30T14:15:32.34031-06:00","closed_at":"2025-12-30T14:15:32.34031-06:00","close_reason":"Closed"}
{"id":"remarkable-sync-aef","title":"Test fixtures and testdata setup","description":"Create testdata/ directory with comprehensive test fixtures:\n- Sample .rmdoc files (small, realistic documents for testing converter)\n- Sample PDFs with known content (for testing OCR and enhancement)\n- Sample images for OCR testing (various handwriting styles)\n- Mock API responses (JSON) for rmclient testing\n- Organize by test category: testdata/{rmdoc,pdfs,images,api-mocks}/\n- Document expected outputs (golden files) for comparison testing\n- Keep test data small to avoid repository bloat\n\nEnables realistic testing without hitting live reMarkable API.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-29T16:49:11.046358-06:00","created_by":"cody.lee","updated_at":"2025-12-30T13:16:07.532305-06:00","closed_at":"2025-12-30T13:16:07.532305-06:00","close_reason":"Closed","dependencies":[{"issue_id":"remarkable-sync-aef","depends_on_id":"remarkable-sync-69u","type":"blocks","created_at":"2025-12-29T16:57:06.712203-06:00","created_by":"daemon"}]}
{"id":"remarkable-sync-akz","title":"Define shared type definitions","description":"Define shared type definitions across all internal packages:\n- internal/rmclient/types.go: Document, Metadata, Collection types for reMarkable API\n- internal/state/types.go: SyncState, DocumentState for tracking sync status\n- internal/ocr/types.go: PageOCR, WordBoundingBox, Rectangle for OCR results\n- internal/converter/types.go: ConversionOptions, ConversionResult for PDF conversion\n\nThese types are used throughout the application and must be defined early.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-29T16:48:55.004636-06:00","created_by":"cody.lee","updated_at":"2025-12-30T10:06:57.285352-06:00","closed_at":"2025-12-30T10:06:57.285352-06:00","close_reason":"Closed","dependencies":[{"issue_id":"remarkable-sync-akz","depends_on_id":"remarkable-sync-69u","type":"blocks","created_at":"2025-12-29T16:56:56.938947-06:00","created_by":"daemon"}]}
{"id":"remarkable-sync-azg","title":"Unit tests for all internal packages","description":"Write comprehensive unit tests for all internal packages:\n- Target: 80%+ code coverage across internal/ packages\n- Use table-driven test pattern for multiple scenarios\n- Mock external dependencies: rmapi (HTTP client), Tesseract (CLI calls), file system operations\n- Use gomock or manual mocks for interfaces\n- Test packages: config, logger, rmclient, state, sync, converter, ocr, pdfenhancer, daemon\n- Focus on error handling, edge cases, boundary conditions\n- Fast execution (mock external calls)\n\nEnsures code quality and prevents regressions.","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-29T16:49:16.481975-06:00","created_by":"cody.lee","updated_at":"2025-12-30T13:30:56.662138-06:00","closed_at":"2025-12-30T13:30:56.662138-06:00","close_reason":"Closed","dependencies":[{"issue_id":"remarkable-sync-azg","depends_on_id":"remarkable-sync-8nh","type":"blocks","created_at":"2025-12-29T16:57:06.951438-06:00","created_by":"daemon"},{"issue_id":"remarkable-sync-azg","depends_on_id":"remarkable-sync-aef","type":"blocks","created_at":"2025-12-29T16:57:06.973976-06:00","created_by":"daemon"}]}
{"id":"remarkable-sync-bgg","title":"reMarkable API client wrapper","description":"Implement internal/rmclient as a wrapper around rmapi library:\n- Wrapper for github.com/ddvk/rmapi (or github.com/juruen/rmapi)\n- Authentication flow: Authenticate() with one-time code, token storage at ~/.remarkable-sync/token.json\n- Operations: ListDocuments(labels), DownloadDocument(id), GetDocumentMetadata(id)\n- Label filtering support to sync only tagged documents\n- Error handling for API failures, rate limits, auth expiry\n- Return structured types (use internal/rmclient/types.go)\n\nProvides interface to reMarkable cloud for syncing documents.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-29T16:49:02.845785-06:00","created_by":"cody.lee","updated_at":"2025-12-30T10:27:31.486101-06:00","closed_at":"2025-12-30T10:27:31.486101-06:00","close_reason":"Closed","dependencies":[{"issue_id":"remarkable-sync-bgg","depends_on_id":"remarkable-sync-akz","type":"blocks","created_at":"2025-12-29T16:56:57.209387-06:00","created_by":"daemon"},{"issue_id":"remarkable-sync-bgg","depends_on_id":"remarkable-sync-00a","type":"blocks","created_at":"2025-12-29T16:56:57.233925-06:00","created_by":"daemon"}]}
{"id":"remarkable-sync-c87","title":"Sync state management with JSON persistence","description":"Implement internal/state package for tracking synchronized documents:\n- SyncState struct with map of DocumentState (ID -\u003e state)\n- JSON file persistence in output directory (.sync-state.json)\n- Operations: Load(), Save(), NeedsSync(doc), MarkSynced(doc)\n- Track: document ID, name, version, last modified, local path, OCR processed status, checksum\n- Enable incremental sync (avoid re-downloading unchanged documents)\n- Handle concurrent access gracefully (not required initially but consider for future)\n\nCritical for efficient incremental sync workflow.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-29T16:48:55.237808-06:00","created_by":"cody.lee","updated_at":"2025-12-30T10:23:01.17646-06:00","closed_at":"2025-12-30T10:23:01.17646-06:00","close_reason":"Closed","dependencies":[{"issue_id":"remarkable-sync-c87","depends_on_id":"remarkable-sync-akz","type":"blocks","created_at":"2025-12-29T16:56:57.181236-06:00","created_by":"daemon"}]}
{"id":"remarkable-sync-cty","title":"Migrate from archived juruen/rmapi to active ddvk/rmapi fork","description":"## Context\n\nCurrently using `github.com/juruen/rmapi v0.0.25` which appears to be archived/unmaintained.\n\nThe active fork is at: https://github.com/ddvk/rmapi\n\n## Tasks\n\n- [ ] Update go.mod to use ddvk/rmapi instead of juruen/rmapi\n- [ ] Run `go mod tidy` to update dependencies\n- [ ] Check for any API changes or breaking changes in ddvk fork\n- [ ] Update imports in affected files (found in: internal/rmclient/, internal/rmrender/)\n- [ ] Test authentication and document sync functionality\n- [ ] Update documentation references to point to the active fork\n\n## Files Likely Affected\n\nBased on grep results:\n- `go.mod` (line 6)\n- `internal/rmclient/client.go`\n- `internal/rmclient/client_test.go`\n- `internal/rmrender/parser.go`\n- Documentation files (README.md, FAQ.md, etc.)\n\n## Benefits\n\n- Access to latest bug fixes and features\n- Active maintenance and community support\n- Better compatibility with current reMarkable API","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T14:49:53.030615-06:00","created_by":"cody.lee","updated_at":"2025-12-30T14:56:32.820175-06:00","closed_at":"2025-12-30T14:56:32.820175-06:00","close_reason":"Successfully migrated to ddvk/rmapi v0.0.32. Updated all API references and fixed deprecated field names."}
{"id":"remarkable-sync-ea7","title":"CLI commands with Cobra","description":"Implement cmd/ package with Cobra framework for CLI interface:\n- Root command: global flags (--config, --output, --log-level, --labels)\n- auth command: authenticate with reMarkable API (one-time setup)\n- sync command: one-time sync with optional --labels filter, --force flag, --no-ocr flag\n- daemon command: start daemon mode with --interval flag\n- version command: display version information\n- Clear help text and examples for each command\n- Integrate with config package for flag processing\n- Wire up to sync orchestrator and daemon mode\n\nUser-facing interface for all operations.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-29T16:49:10.552683-06:00","created_by":"cody.lee","updated_at":"2025-12-30T12:50:57.711188-06:00","closed_at":"2025-12-30T12:50:57.711188-06:00","close_reason":"Closed","dependencies":[{"issue_id":"remarkable-sync-ea7","depends_on_id":"remarkable-sync-8nh","type":"blocks","created_at":"2025-12-29T16:57:06.198645-06:00","created_by":"daemon"},{"issue_id":"remarkable-sync-ea7","depends_on_id":"remarkable-sync-8m2","type":"blocks","created_at":"2025-12-29T16:57:06.221654-06:00","created_by":"daemon"},{"issue_id":"remarkable-sync-ea7","depends_on_id":"remarkable-sync-8fy","type":"blocks","created_at":"2025-12-29T16:57:06.246428-06:00","created_by":"daemon"}]}
{"id":"remarkable-sync-gcm","title":"PDF enhancement with OCR text layer","description":"Implement internal/pdfenhancer to add searchable text layer to PDFs:\n- Open original PDF from converter\n- For each page: get OCR results (text + bounding boxes from internal/ocr)\n- Create invisible text layer with positioned text matching OCR coordinates\n- Text properties: transparent/invisible font, searchable but not visible\n- Overlay text layer on original page preserving visual appearance\n- Save enhanced PDF as {name}_ocr.pdf (or overwrite based on config)\n- Handle coordinate system differences between OCR and PDF\n\nMakes handwritten notes searchable while preserving original appearance.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-29T16:49:03.745055-06:00","created_by":"cody.lee","updated_at":"2025-12-30T12:28:01.228407-06:00","closed_at":"2025-12-30T12:28:01.228407-06:00","close_reason":"Closed","dependencies":[{"issue_id":"remarkable-sync-gcm","depends_on_id":"remarkable-sync-ph3","type":"blocks","created_at":"2025-12-29T16:56:57.778249-06:00","created_by":"daemon"},{"issue_id":"remarkable-sync-gcm","depends_on_id":"remarkable-sync-65d","type":"blocks","created_at":"2025-12-29T16:56:57.803396-06:00","created_by":"daemon"}]}
{"id":"remarkable-sync-giu","title":"Release automation with goreleaser","description":"Set up release automation with goreleaser:\n- Create .goreleaser.yml configuration\n- Multi-platform builds: Linux (amd64, arm64), macOS (amd64, arm64), Windows (amd64)\n- GitHub releases: attach binaries, generate changelog from git tags\n- Version management: semantic versioning, git tags\n- Archive formats: tar.gz for Unix, zip for Windows\n- Checksums and signatures for security\n- Optional: Homebrew tap for macOS installation\n- GitHub Actions workflow to trigger releases on tag push\n\nAutomates binary releases for all platforms.","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-29T16:49:17.164915-06:00","created_by":"cody.lee","updated_at":"2025-12-30T14:05:39.954948-06:00","closed_at":"2025-12-30T14:05:39.954948-06:00","close_reason":"Closed","dependencies":[{"issue_id":"remarkable-sync-giu","depends_on_id":"remarkable-sync-ui9","type":"blocks","created_at":"2025-12-29T16:57:07.48296-06:00","created_by":"daemon"}]}
{"id":"remarkable-sync-ph3","title":"PDF library integration research and setup","description":"Research and integrate PDF library for reading and writing PDFs:\n- Evaluate github.com/pdfcpu/pdfcpu (open source, preferred)\n- Fallback: github.com/unidoc/unipdf (commercial license but more features)\n- Required capabilities: read existing PDFs, add text layers, coordinate handling\n- Test with sample reMarkable PDFs to ensure compatibility\n- Document library choice and rationale\n- Create basic wrapper/utility functions for common operations\n\nFoundation for PDF conversion and enhancement components.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-29T16:49:03.295109-06:00","created_by":"cody.lee","updated_at":"2025-12-30T10:54:07.650297-06:00","closed_at":"2025-12-30T10:54:07.650297-06:00","close_reason":"Closed","dependencies":[{"issue_id":"remarkable-sync-ph3","depends_on_id":"remarkable-sync-69u","type":"blocks","created_at":"2025-12-29T16:56:57.51182-06:00","created_by":"daemon"}]}
{"id":"remarkable-sync-q89","title":"Phase 2: Full .rm stroke rendering to PDF","description":"Implement full rendering of .rm binary stroke files to PDF with vector graphics.\n\nPhase 1 (remarkable-sync-6gn) implemented extraction and placeholder PDFs. This phase adds actual stroke rendering.\n\n## Core Requirements\n\n### 1. Parse .rm Binary Files\n- Integrate github.com/deionizedoatmeal/rmapi/encoding/rm for v6 format support\n- Read layers, lines, and point data from .rm files\n- Handle all brush types: pen, pencil, highlighter, eraser, marker\n- Extract stroke properties: color, width, pressure, coordinates\n\n### 2. Render Strokes to PDF\n- Convert reMarkable coordinates (1404x1872) to PDF coordinate system\n- Render strokes as vector graphics using pdfcpu\n- Support stroke width and pressure variations\n- Implement brush type rendering:\n  - Pen: solid lines with pressure\n  - Pencil: textured strokes\n  - Highlighter: semi-transparent overlays\n  - Marker: broad strokes\n  - Eraser: remove underlying content\n\n### 3. Layer Support\n- Render multiple layers in correct order\n- Support layer visibility/opacity\n- Preserve layer structure from reMarkable\n\n### 4. Template Rendering\n- Render page templates (Blank, Lined, Grid, Dots, etc.)\n- Template library or generation\n- Template overlay on background\n\n## Technical Approach\n\n**Option A: rmapi encoding/rm + pdfcpu**\n- Use deionizedoatmeal/rmapi/encoding/rm for parsing\n- Custom renderer with pdfcpu for vector graphics\n- Full control over output quality\n- Recommended approach\n\n**Option B: Integrate go-remarkable2pdf**\n- Use poundifdef/go-remarkable2pdf library\n- May need updates for v6 format\n- AGPL-3.0 license consideration\n- Faster implementation but less control\n\n**Option C: Hybrid**\n- Parse with encoding/rm\n- Reference go-remarkable2pdf rendering logic\n- Implement custom renderer optimized for our use case\n\n## Testing Strategy\n\n- Test with example/Test.rmdoc (2 pages with handwriting)\n- Create test fixtures with various brush types\n- Validate stroke positioning accuracy\n- Compare output with reMarkable app PDF export\n- Performance testing with large documents\n\n## Success Criteria\n\n- Accurately renders all brush types\n- Correct coordinate mapping\n- Layer support working\n- Templates rendered correctly\n- Passes visual comparison tests\n- Performance: \u003c500ms per page average\n\n## Dependencies\n\n- remarkable-sync-6gn (Phase 1 converter) - COMPLETED\n- Consider creating: remarkable-sync-aef (test fixtures) for comprehensive testing\n\n## References\n\n- rmapi encoding/rm: https://pkg.go.dev/github.com/deionizedoatmeal/rmapi/encoding/rm\n- go-remarkable2pdf: https://github.com/poundifdef/go-remarkable2pdf\n- reMarkable format spec: https://github.com/YakBarber/remarkable_file_format\n- rmscene (v6 format): https://github.com/ricklupton/rmscene","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-30T12:05:13.059144-06:00","created_by":"cody.lee","updated_at":"2025-12-30T14:38:16.512662-06:00","closed_at":"2025-12-30T14:38:16.512662-06:00","close_reason":"Successfully implemented v6 .rm file parser and PDF rendering.\n\n## Summary\n\n### Parser Implementation\n- Created simplified v6 parser using pattern-based stroke detection\n- Successfully parses binary .rm files with coordinate scanning\n- Extracts stroke data: 78 strokes, 1,331 points from test file\n- Handles Document, Layer, Line, and Point structures\n\n### PDF Rendering\n- Implemented full PDF rendering pipeline using gopdf\n- Converts parsed strokes to vector graphics in PDF format\n- Supports pressure-sensitive stroke width\n- Coordinate transformation from reMarkable pixels to PDF points\n- Generates 9.8KB PDF from example file\n\n### Testing\n- 5 parser tests (all passing)\n- 5 renderer tests (all passing)\n- End-to-end parsing and rendering validated\n\n### Files Created\n- internal/rmrender/README.md\n- internal/rmrender/types.go\n- internal/rmrender/parser.go\n- internal/rmrender/parser_test.go\n- internal/rmrender/renderer.go\n- internal/rmrender/renderer_test.go\n\n### Dependencies Added\n- github.com/signintech/gopdf v0.34.0\n\n## Next Steps\n- Full brush type support (currently defaults to Ballpoint)\n- Proper layer handling\n- Template rendering\n- More robust v6 format parsing based on Kaitai Struct specification","dependencies":[{"issue_id":"remarkable-sync-q89","depends_on_id":"remarkable-sync-6gn","type":"blocks","created_at":"2025-12-30T12:05:18.245797-06:00","created_by":"daemon"}]}
{"id":"remarkable-sync-ui9","title":"Integration tests for end-to-end workflows","description":"Write integration tests for end-to-end workflows:\n- Full sync workflow: auth → list → download → convert → OCR → enhance (using test fixtures)\n- PDF conversion pipeline: .rmdoc → PDF (verify output format)\n- OCR pipeline: PDF → images → OCR → text with bounding boxes\n- Daemon lifecycle: startup → periodic sync → graceful shutdown\n- CLI command execution: test each command with various flags\n- Use testdata/ fixtures to avoid external dependencies\n- Verify state file updates correctly\n- Test error recovery scenarios\n\nValidates complete user workflows work correctly.","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-29T16:49:16.705125-06:00","created_by":"cody.lee","updated_at":"2025-12-30T13:38:56.759607-06:00","closed_at":"2025-12-30T13:38:56.759607-06:00","close_reason":"Closed","dependencies":[{"issue_id":"remarkable-sync-ui9","depends_on_id":"remarkable-sync-5y9","type":"blocks","created_at":"2025-12-29T16:57:07.201933-06:00","created_by":"daemon"},{"issue_id":"remarkable-sync-ui9","depends_on_id":"remarkable-sync-aef","type":"blocks","created_at":"2025-12-29T16:57:07.225681-06:00","created_by":"daemon"}]}
{"id":"remarkable-sync-znp","title":"Update Go modules and configure Dependabot with grouping","description":"Configure Dependabot to automatically manage dependency updates with grouped PRs for easier maintenance.\n\n## Objectives\n\n### 1. Update All Go Modules\n- Run `go get -u ./...` to update all dependencies\n- Review and test updated dependencies\n- Ensure compatibility with Go 1.23\n- Run full test suite to validate updates\n- Commit updated go.mod and go.sum\n\n### 2. Configure Dependabot\n- Create .github/dependabot.yml configuration file\n- Enable grouped updates for Go modules\n- Enable grouped updates for GitHub Actions workflows\n- Set appropriate update schedule (e.g., weekly)\n- Configure PR limits and reviewers\n\n## Dependabot Configuration Requirements\n\n### Go Modules Grouping\n- Group all Go module updates into single PR per update cycle\n- Pattern: \"chore(deps): update go dependencies\"\n- Reduces PR noise and simplifies review process\n\n### GitHub Actions Grouping  \n- Group all workflow/action updates into single PR\n- Pattern: \"chore(deps): update github actions\"\n- Keeps CI/CD dependencies updated\n\n### Configuration Options\n- Update schedule: weekly (Monday)\n- Open PR limit: 5\n- Time window: morning hours\n- Auto-merge: disabled (require manual review)\n- Rebase strategy: prefer rebase over merge\n\n## Example Configuration\n\n```yaml\nversion: 2\nupdates:\n  # Go modules\n  - package-ecosystem: \"gomod\"\n    directory: \"/\"\n    schedule:\n      interval: \"weekly\"\n      day: \"monday\"\n      time: \"09:00\"\n    open-pull-requests-limit: 5\n    groups:\n      go-dependencies:\n        patterns:\n          - \"*\"\n        update-types:\n          - \"minor\"\n          - \"patch\"\n\n  # GitHub Actions\n  - package-ecosystem: \"github-actions\"\n    directory: \"/\"\n    schedule:\n      interval: \"weekly\"\n      day: \"monday\"\n      time: \"09:00\"\n    groups:\n      github-actions:\n        patterns:\n          - \"*\"\n```\n\n## Testing\n\n- Verify Dependabot recognizes configuration\n- Check that first grouped PR is created correctly\n- Validate PR contains all relevant updates\n- Test that CI runs successfully on update PR\n\n## Benefits\n\n- **Reduced PR noise**: Single PR instead of multiple per dependency\n- **Easier review**: Review all updates at once with full context\n- **Consistent updates**: Regular schedule ensures dependencies stay current\n- **Security**: Automated security updates for vulnerable dependencies\n- **Time savings**: Less time managing individual dependency PRs\n\n## References\n\n- [Dependabot grouping documentation](https://docs.github.com/en/code-security/dependabot/dependabot-version-updates/configuration-options-for-the-dependabot.yml-file#groups)\n- [Go module updates](https://github.com/dependabot/dependabot-core/blob/main/go_modules/README.md)\n- [GitHub Actions updates](https://docs.github.com/en/code-security/dependabot/working-with-dependabot/keeping-your-actions-up-to-date-with-dependabot)\n\n## Acceptance Criteria\n\n- [ ] All Go modules updated to latest compatible versions\n- [ ] All tests pass with updated dependencies\n- [ ] .github/dependabot.yml created with grouping configuration\n- [ ] Dependabot recognizes and validates configuration\n- [ ] Documentation updated (if needed)\n- [ ] Changes committed and pushed","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T14:40:38.062102-06:00","created_by":"cody.lee","updated_at":"2025-12-30T14:44:34.276614-06:00","closed_at":"2025-12-30T14:44:34.276614-06:00","close_reason":"Successfully updated all Go modules and configured Dependabot with grouped updates.\n\n## Completed Work\n\n### 1. Go Module Updates ✅\nUpdated all Go dependencies to latest compatible versions with comprehensive testing.\n\n**Major Updates:**\n- unidoc/unipdf/v3: v3.6.1 → v3.69.0\n- adrg/xdg: v0.2.1 → v0.5.3\n- adrg/strutil: v0.1.0 → v0.3.1\n- google/uuid: v1.1.1 → v1.6.0\n\n**Testing Results:**\n- ✅ All test suites pass (100+ tests)\n- ✅ 82-92% code coverage maintained\n- ✅ internal/rmrender: all 10 tests passing\n- ✅ No breaking changes detected\n\n### 2. Dependabot Configuration ✅\nCreated .github/dependabot.yml with intelligent grouping strategy.\n\n**Go Modules Configuration:**\n- Weekly updates (Mondays, 9 AM CT)\n- Groups minor + patch updates → single PR\n- Major updates kept separate for review\n- Max 5 open PRs\n- Labels: dependencies, go, automated\n\n**GitHub Actions Configuration:**\n- Weekly updates (Mondays, 9 AM CT)\n- All action updates grouped → single PR\n- Max 3 open PRs\n- Labels: dependencies, github-actions, automated\n\n## Benefits Delivered\n\n✅ **Reduced PR Noise:** One grouped PR instead of 20+ individual PRs  \n✅ **Automated Security:** Weekly security patch updates  \n✅ **Easier Reviews:** Review all related updates together  \n✅ **Time Savings:** Less manual dependency management  \n✅ **Consistent Updates:** Predictable Monday morning schedule  \n\n## Files Modified\n\n- go.mod: Updated 23 dependencies\n- go.sum: Updated checksums\n- .github/dependabot.yml: New configuration (57 lines)\n\n## Next Steps\n\nDependabot will:\n1. Scan dependencies on next Monday (or when PR merged)\n2. Create grouped PRs for available updates\n3. Label PRs appropriately\n4. Run CI tests automatically\n\nThe 3 security vulnerabilities flagged by GitHub will be addressed in the first Dependabot PR cycle.\n\n## Validation\n\nTo verify Dependabot is active:\n1. Check GitHub Security tab for Dependabot alerts\n2. Wait for first Monday after merge\n3. Expect grouped dependency update PR\n\nConfiguration follows GitHub best practices and industry standards for dependency automation."}
